/// <reference types="node" />
<<<<<<< HEAD
import { RedisCommandArgument } from "../commands";
export declare enum PubSubType {
    CHANNELS = "CHANNELS",
    PATTERNS = "PATTERNS",
    SHARDED = "SHARDED"
}
=======
import { RedisArgument } from '../RESP/types';
import { CommandToWrite } from './commands-queue';
export declare const PUBSUB_TYPE: {
    readonly CHANNELS: "CHANNELS";
    readonly PATTERNS: "PATTERNS";
    readonly SHARDED: "SHARDED";
};
export type PUBSUB_TYPE = typeof PUBSUB_TYPE;
export type PubSubType = PUBSUB_TYPE[keyof PUBSUB_TYPE];
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
export type PubSubListener<RETURN_BUFFERS extends boolean = false> = <T extends RETURN_BUFFERS extends true ? Buffer : string>(message: T, channel: T) => unknown;
export interface ChannelListeners {
    unsubscribing: boolean;
    buffers: Set<PubSubListener<true>>;
    strings: Set<PubSubListener<false>>;
}
export type PubSubTypeListeners = Map<string, ChannelListeners>;
<<<<<<< HEAD
export type PubSubCommand = ReturnType<typeof PubSub.prototype.subscribe | typeof PubSub.prototype.unsubscribe | typeof PubSub.prototype.extendTypeListeners>;
=======
export type PubSubListeners = Record<PubSubType, PubSubTypeListeners>;
export type PubSubCommand = (Required<Pick<CommandToWrite, 'args' | 'channelsCounter' | 'resolve'>> & {
    reject: undefined | (() => unknown);
});
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
export declare class PubSub {
    #private;
    static isStatusReply(reply: Array<Buffer>): boolean;
    static isShardedUnsubscribe(reply: Array<Buffer>): boolean;
    get isActive(): boolean;
<<<<<<< HEAD
    subscribe<T extends boolean>(type: PubSubType, channels: string | Array<string>, listener: PubSubListener<T>, returnBuffers?: T): {
        args: RedisCommandArgument[];
=======
    readonly listeners: PubSubListeners;
    subscribe<T extends boolean>(type: PubSubType, channels: string | Array<string>, listener: PubSubListener<T>, returnBuffers?: T): {
        args: RedisArgument[];
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
        channelsCounter: number;
        resolve: () => void;
        reject: () => void;
    } | undefined;
    extendChannelListeners(type: PubSubType, channel: string, listeners: ChannelListeners): {
        args: (string | Buffer)[];
        channelsCounter: number;
        resolve: () => number;
        reject: () => void;
    } | undefined;
    extendTypeListeners(type: PubSubType, listeners: PubSubTypeListeners): {
<<<<<<< HEAD
        args: RedisCommandArgument[];
=======
        args: RedisArgument[];
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
        channelsCounter: number;
        resolve: () => number;
        reject: () => void;
    } | undefined;
    unsubscribe<T extends boolean>(type: PubSubType, channels?: string | Array<string>, listener?: PubSubListener<T>, returnBuffers?: T): {
<<<<<<< HEAD
        args: RedisCommandArgument[];
=======
        args: RedisArgument[];
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
        channelsCounter: number;
        resolve: () => void;
        reject: undefined;
    } | undefined;
    reset(): void;
<<<<<<< HEAD
    resubscribe(): Array<PubSubCommand>;
    handleMessageReply(reply: Array<Buffer>): boolean;
    removeShardedListeners(channel: string): ChannelListeners;
    getTypeListeners(type: PubSubType): PubSubTypeListeners;
}
=======
    resubscribe(): PubSubCommand[];
    handleMessageReply(reply: Array<Buffer>): boolean;
    removeShardedListeners(channel: string): ChannelListeners;
    removeAllListeners(): {
        CHANNELS: PubSubTypeListeners;
        PATTERNS: PubSubTypeListeners;
        SHARDED: PubSubTypeListeners;
    };
}
//# sourceMappingURL=pub-sub.d.ts.map
>>>>>>> 5e3222a0 (Initial commit for Agriconnect Kenya project)
